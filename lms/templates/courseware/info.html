<%inherit file="../main.html" />
<%namespace name='static' file='../static_content.html'/>
<%!
from django.utils.translation import ugettext as _
from courseware.courses import get_course_info_section, get_course_date_summary

from openedx.core.djangoapps.self_paced.models import SelfPacedConfiguration
%>

<%block name="pagetitle">${_("{course_number} Course Info").format(course_number=course.display_number_with_default)}</%block>

<%block name="headextra">
<%static:css group='style-course-vendor'/>
<%static:css group='style-course'/>
</%block>

% if show_enroll_banner:
<div class="wrapper-msg urgency-low" id="failed-verification-banner">
  <div class="msg msg-reverify is-dismissable">
    <div class="msg-content">
      <h2 class="title">${_("You are not enrolled yet")}</h2>
      <div class="copy">
        <p class='enroll-message'>
          ${_(u"You are not currently enrolled in this course. {link_start}Sign up now!{link_end}").format(
          link_start=u"<a href={}>".format(url_to_enroll),
          link_end=u"</a>"
          )}
        </p>
      </div>
    </div>
  </div>
</div>
% endif

<%include file="/courseware/course_navigation.html" args="active_page='info'" />

<%static:require_module module_name="js/courseware/toggle_element_visibility" class_name="ToggleElementVisibility">
        ToggleElementVisibility();
</%static:require_module>

<%block name="bodyclass">view-in-course view-course-info ${course.css_class or ''}</%block>
<section class="container">
  <div class="home">
    <div class="page-header-main">
        <h1 class="page-title">${_("Welcome to {org}'s {course_name}!").format(org=course.id.org, course_name=course.id.course) | h}</h1>
        <h2 class="page-subtitle">${course.display_name | h}</h2>
    </div>
    % if last_accessed_courseware:
      <div class="page-header-secondary">
          <i class="fa fa-clock-o"></i>
          <p class="last-accessed-message">${_("Jump back to where you were last:")}</p>
          <a href="${last_accessed_url}">${last_accessed_courseware.display_name | h}</a>
      </div>
    % endif
  </div>
  <div class="info-wrapper">
    <div class="course-updates">
      % if user.is_authenticated():
        <section class="updates">
          % if studio_url is not None and masquerade and masquerade.role == 'staff':
            <div class="wrap-instructor-info studio-view">
              <a class="instructor-info-action" href="${studio_url}">
                ${_("View Updates in Studio")}
              </a>
            </div>
          % endif
          <h1 class="course-info-heading">${_("Course Updates and News")}</h1>
          ${get_course_info_section(request, course, 'updates')}
        </section>
        % if SelfPacedConfiguration.current().enable_course_home_improvements:
          <section aria-label="${_('Important Course Dates')}" class="course-dates">
            <h1 class="course-info-heading">${_("Important Course Dates")}</h1>
            ${get_course_date_summary(course, user)}
          </section>
        % endif
        % else:
        <section class="updates">
          <h1 class="course-info-heading">${_("Course Updates and News")}</h1>
          ${get_course_info_section(request, course, 'guest_updates')}
        </section>
      % endif
    </div>
    % if user.is_authenticated():
      <section aria-label="${_('Handout Navigation')}" class="handouts">
          <h1 class="course-info-heading">${_(course.info_section_name)}</h1>
          ${get_course_info_section(request, course, 'handouts')}
      </section>
    % else:
      <section aria-label="${_('Handout Navigation')}" class="handouts">
          <h1 class='course-info-heading'>${_("Course Handouts")}</h1>
          ${get_course_info_section(request, course, 'guest_handouts')}
      </section>
    % endif
  </div>
</section>
